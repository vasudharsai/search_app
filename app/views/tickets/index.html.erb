<p id="notice"><%= notice %></p>


<div class="align-title">
  <h2>Select search attribute from below drop down</h2>


  <%= form_with(url: search_tickets_path, method: :get, local: true) do |f| %>

    <div style="margin-left: 180px;">
      <%= select_tag "select_attribute", options_for_select(@attributes) %>
      <%= f.text_field :q, id: :q %>
    </div>
    <br>

    <div class="actions" style="margin-left: 300px;">
      <%= f.submit 'Search', class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>

<h3>Tickets</h3>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>URL</th>
      <th>External ID</th>
      <th>Type</th>
      <th>Subject</th>
      <th>Description</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Via</th>
    </tr>
  </thead>

  <tbody>
    <% @tickets.each do |ticket| %>
      <tr>
        <td><%= ticket.id %></td>
        <td><%= ticket.url %></td>
        <td><%= ticket.external_id %></td>
        <td><%= ticket.tick_type %></td>
        <td><%= ticket.subject %></td>
        <td><%= h truncate(ticket.description, :length => 20) %></td>
        <td><%= ticket.priority %></td>
        <td><%= ticket.status %></td>
        <td><%= ticket.via %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= will_paginate @tickets, class: 'well'  %>

<%= render :partial => 'shared/nav_links' %>

